// Templates: https://github.com/rocker-org/devcontainer-templates/tree/main/src/r-ver
// Images: https://github.com/rocker-org/devcontainer-images
// r-ver, tidyverse
{
    "image": "ghcr.io/rocker-org/devcontainer/tidyverse:4.3",
    "features": {
        
        // https://github.com/rocker-org/devcontainer-features/tree/main/src/apt-packages
        // the 'jq' command must be installed to update rstudio-prefs.json (rstudio-server function)
        "ghcr.io/rocker-org/devcontainer-features/apt-packages:1": {
            "packages": "jq"
        },
        
        // https://github.com/rocker-org/devcontainer-features/tree/main/src/rstudio-server
        "ghcr.io/rocker-org/devcontainer-features/rstudio-server": {},
        
        // https://github.com/rocker-org/devcontainer-features/tree/main/src/r-packages
        // install R packages via pak::pak()
        // example: github::r-lib/crayon
        "ghcr.io/rocker-org/devcontainer-features/r-packages:1": {
            "packages": "palmerpenguins"
        }
    },
    // Start server
    "postAttachCommand": {
        "rstudio-start": "rserver"
    },
    // RStudio Server Ports
    "forwardPorts": [
        8787
    ],
    "portsAttributes": {
        "8787": {
            "label": "RStudio IDE"
        }
    }
}